<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>D3 Damage Calculator</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.1.1/cyborg/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <script type="text/x-handlebars">
    <div class="container">
      <div class="page-header">
        <h1>Diablo 3 Damage Calculator <small><a href="#" id="style-toggle">Light/Dark Theme</a>, {{#link-to 'calculation'}}Calculation{{/link-to}}</small></h1>
      </div>
    </div>

    <div class="container">
      {{outlet}}
    </div>
    <br />
    <br />
    <br />
    <br />
  </script>

  <script type="text/x-handlebars" id="stats">
    <form action="#" method="GET" class="form-horizontal">
      <div class="row">
        <div class="col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading">Weapon 1 <i class="glyphicon glyphicon-info-sign pull-right" data-help-image="img/weapon1.png"></i></div>
            <div class="panel-body">
              <div class="form-group">
                <label for="weaponMinDamage1" class="col-sm-3 col-md-5 col-lg-4 control-label">Minimum Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  {{input type="text" id="weaponMinDamage1" value=weaponMinDamage1 class="form-control"}}
                </div>
              </div>
              <div class="form-group">
                <label for="weaponMaxDamage1" class="col-sm-3 col-md-5 col-lg-4 control-label">Maximum Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  {{input type="text" id="weaponMaxDamage1" value=weaponMaxDamage1 class="form-control"}}
                </div>
              </div>
              <div class="form-group">
                <label for="weaponAttacksPerSecond1" class="col-sm-3 col-md-5 col-lg-4 control-label">Attacks per Second</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  {{input type="text" id="weaponAttacksPerSecond1" value=weaponAttacksPerSecond1 class="form-control"}}
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 col-md-5 col-lg-4 control-label">Damage per Second</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <p class="form-control-static">{{locale weaponDamagePerSecond1}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading">Weapon 2 <i class="glyphicon glyphicon-info-sign pull-right" data-help-image="img/weapon2.png"></i></div>
            <div class="panel-body">
              <div class="form-group">
                <label for="weaponMinDamage2" class="col-sm-3 col-md-5 col-lg-4 control-label">Minimum Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  {{input type="text" id="weaponMinDamage2" value=weaponMinDamage2 class="form-control"}}
                </div>
              </div>
              <div class="form-group">
                <label for="weaponMaxDamage2" class="col-sm-3 col-md-5 col-lg-4 control-label">Maximum Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  {{input type="text" id="weaponMaxDamage2" value=weaponMaxDamage2 class="form-control"}}
                </div>
              </div>
              <div class="form-group">
                <label for="weaponAttacksPerSecond2" class="col-sm-3 col-md-5 col-lg-4 control-label">Attacks per Second</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  {{input type="text" id="weaponAttacksPerSecond2" value=weaponAttacksPerSecond2 class="form-control"}}
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 col-md-5 col-lg-4 control-label">Damage per Second</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <p class="form-control-static">{{locale weaponDamagePerSecond2}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading">Character Stats</div>
            <div class="panel-body">
              <div class="form-group">
                <label for="primaryAttribute" class="col-sm-3 col-md-5 col-lg-4 control-label"><i class="glyphicon glyphicon-info-sign" data-help-image="img/primary-stat.png"></i> Primary Attribute</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  {{input type="text" id="primaryAttribute" value=primaryAttribute class="form-control"}}
                </div>
              </div>
              <div class="form-group">
                <label for="attackSpeed" class="col-sm-3 col-md-5 col-lg-4 control-label"><i class="glyphicon glyphicon-info-sign" data-help-image="img/attack-speed.png"></i> Attack Speed</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <div class="input-group">
                    {{input type="text" id="attackSpeed" value=attackSpeed class="form-control"}}
                    <span class="input-group-addon">%</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="criticalHitChance" class="col-sm-3 col-md-5 col-lg-4 control-label"><i class="glyphicon glyphicon-info-sign" data-help-image="img/crit-chance.png"></i> Critical Hit Chance</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <div class="input-group">
                    {{input type="text" id="criticalHitChance" value=criticalHitChance class="form-control"}}
                    <span class="input-group-addon">%</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="criticalHitDamage" class="col-sm-3 col-md-5 col-lg-4 control-label"><i class="glyphicon glyphicon-info-sign" data-help-image="img/crit-damage.png"></i> Critical Hit Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <div class="input-group">
                    {{input type="text" id="criticalHitDamage" value=criticalHitDamage class="form-control"}}
                    <span class="input-group-addon">%</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="passiveDamage" class="col-sm-3 col-md-5 col-lg-4 control-label"><i class="glyphicon glyphicon-info-sign" data-help-image="img/passive-damage.png"></i> Passive Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <div class="input-group">
                    {{input type="text" id="passiveDamage" value=passiveDamage class="form-control"}}
                    <span class="input-group-addon">%</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="elementalDamage" class="col-sm-3 col-md-5 col-lg-4 control-label"><i class="glyphicon glyphicon-info-sign" data-help-image="img/elemental-damage.png"></i> Elemental Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <div class="input-group">
                    {{input type="text" id="elementalDamage" value=elementalDamage class="form-control"}}
                    <span class="input-group-addon">%</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="eliteDamage" class="col-sm-3 col-md-5 col-lg-4 control-label">Elite Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <div class="input-group">
                    {{input type="text" id="eliteDamage" value=eliteDamage class="form-control"}}
                    <span class="input-group-addon">%</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 col-md-5 col-lg-4 control-label"><i class="glyphicon glyphicon-info-sign" data-help-image="img/total-damage.png"></i> Sheet Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <p class="form-control-static">{{locale totalDamage}}</p>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 col-md-5 col-lg-4 control-label">Elemental Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <p class="form-control-static">{{locale totalElementalDamage}}</p>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 col-md-5 col-lg-4 control-label">Elite Ele. Damage</label>
                <div class="col-sm-9 col-md-7 col-lg-8">
                  <p class="form-control-static">{{locale totalEliteDamage}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading">Damage Per Stat</div>
            <div class="panel-body">
              <p>Each number represents how much damage you will gain by increasing the specified stat by 1.</p>
              <p>Critical Hit Chance damage is based on an increase of 0.5 instead of 1.</p>
              <dl class="dl-horizontal">
                <dt>Weapon Damage</dt>
                <dd>{{locale diffPlusOneWeaponDamage}}</dd>
                <dt>Primary Attribute</dt>
                <dd>{{locale diffPlusOnePrimaryAttribute}}</dd>
                <dt>Critical Hit Chance</dt>
                <dd>{{locale diffPlusOneCriticalHitChance}}</dd>
                <dt>Critical Hit Damage</dt>
                <dd>{{locale diffPlusOneCriticalHitDamage}}</dd>
                <dt>Attack Speed</dt>
                <dd>{{locale diffPlusOneAttackSpeed}}</dd>
                <dt>Passive Damage</dt>
                <dd>{{locale diffPlusOnePassiveDamage}}</dd>
                <dt>Elemental Damage</dt>
                <dd>{{locale diffPlusOneElementalDamage}}</dd>
                <dt>Elite Ele. Damage</dt>
                <dd>{{locale diffPlusOneEliteDamage}}</dd>
              </dl>
            </div>
          </div>
        </div>
      </div>
    </form>
  </script>

  <script type="text/x-handlebars" id="calculation">
  <h1 id="how-sheet-damage-is-calculated">How Sheet Damage is Calculated</h1>
    <p>Sheet damage in Diablo III is calculated based on the following five factors:</p>
    <ol>
      <li>Average Weapon Damage</li>
      <li>Primary Attribute Modifier</li>
      <li>Critical Modifier</li>
      <li>Attack Speed Modifier</li>
      <li>Passive Damage Modifier</li>
    </ol>
    <p>Each modifier is purely beneficial to your damage. If you have no extra points in the stats that a modifier is based on, the modifier will have a value of 1 so that in the final calculation it will not reduce your damage.</p>
    <p>I will go into detail on how each of the five factors is calculated.</p>
    <h2 id="average-weapon-damage">Average Weapon Damage</h2>
    <p>To calculate average weapon damage, look for the minimum and maximum damage on each of your weapons, along with any bonus minimum/maximum damage from other pieces of gear.</p>
    <p>For example, if your gear has the following stats:</p>
    <pre><code>Weapon 1: 1343 to 1841 Damage
Weapon 2: 1287 to 1763 Damage
Ring 1: 30 to 50 Damage
</code></pre>
    <p>Add the ring damage to each weapon to get the total weapon damage for each weapon:</p>
    <pre><code>Weapon 1: (1373 + 30) to (1841 + 50) Damage
Weapon 1: 1373 to 1891 Damage

Weapon 2: (1287 + 30) to (1813 + 50) Damage
Weapon 2: 1317 to 1813 Damage
</code></pre>
    <p>... then find the average:</p>
    <pre><code>Average = (1373 + 1891 + 1317 + 1813) / 4
Average = 6394 / 4
Average = 1598.5
</code></pre>
    <p>If you only have one weapon, only add the minimum and maximum damage from the adjusted weapon damage and divide by two instead of four.</p>
    <p>If you have an off-hand that doesn't actually attack like a focus or mojo, just add its bonus damage to your main-hand weapon. Then run the calculation as if you only have one weapon equipped.</p>
    <h2 id="primary-attribute-modifier">Primary Attribute Modifier</h2>
    <p>The primary attribute modifier is calculated by starting with 1, and then adding 1% for each point in your primary attribute.</p>
    <p>To calculate it, we use this formula:</p>
    <pre><code>Modifier = 1 + (Primary Attribute / 100)
</code></pre>
    <p>So if you have 7490 points in your primary attribute, your modifier would be:</p>
    <pre><code>Modifier = 1 + (7490 / 100)
Modifier = 1 + 74.9
Modifier = 75.9
</code></pre>
    <h2 id="critical-modifier">Critical Modifier</h2>
    <p>The critical modifier determines how much your critical hit chance and critical hit damage will affect your overall damage.</p>
    <p>To calculate it, we use this formula:</p>
    <pre><code>Modifier = 1 + (Crit Chance * Crit Damage)
</code></pre>
    <p>So if you have a 41.5% crit chance and 423% bonus damage, your modifier would be:</p>
    <pre><code>Modifier = 1 + (0.415 * 4.23)
Modifier = 1 + 1.75545
Modifier = 2.75545
</code></pre>
    <h2 id="attack-speed-modifier">Attack Speed Modifier</h2>
    <h3 id="warning">Warning</h3>
    <p>This is the tricky one. If you have bonus attack speed on your weapon, you first need to figure out the exact number of attacks per second the weapon has since the tooltips in-game will round to two decimal places.</p>
    <p>If you have a 1.4 attacks per second weapon with 7% attack speed on it, the attacks per second number below the minimum and maximum damage numbers will read "1.5 Attacks per Second." The problem with this is that 1.4 * 1.07 is actually 1.498, not
      1.5.</p>
    <p>For the rest of this section, it is assumed that you will use the real attacks per second rather than the rounded one from the tooltip.</p>
    <h3 id="single-weapon-modifier-calculation">Single Weapon Modifier Calculation</h3>
    <p>If you use only a single weapon, or a one-hand weapon and an off-hand like a focus or mojo, your modifier calculation is easy:</p>
    <pre><code>Modifier = 1 + (Bonus Attack Speed * Attacks Per Second)
</code></pre>
    <p>If your weapon has a tooltip attack speed of 1.4 attacks per second, and you have 46.4% bonus attack speed, your modifier is:</p>
    <pre><code>Modifier = 1 + (0.464 * 1.4)
Modifier = 1 + 0.6496
Modifier = 1.6496
</code></pre>
    <h3 id="dual-wield-modifier-calculation">Dual-Wield Modifier Calculation</h3>
    <p>However, if you dual-wield, you need to calculate your actual attacks per second instead of using one of your weapon's attacks per second.</p>
    <p>Your average attacks per second when dual-wielding is not simply the average of the two weapon's attacks per second. It's actually:</p>
    <pre><code>Average APS = (2 * APS1 * APS2) / (APS1 + APS2)
</code></pre>
    <p>... where APS1 is weapon 1's tooltip attacks per second and APS2 is weapon 2's tooltip attacks per second.</p>
    <p>If you have two weapons, one with 1.47 attacks per second and the other with 1.4 attacks per second, your modifier would be:</p>
    <pre><code>Modifier = 1 + ((2 * 1.47 * 1.4) / (1.47 + 1.4))
Modifier = 1 + (4.116 / 2.87)
Modifier = 1 + 1.43414634...
Modifier = 2.43414634...
</code></pre>
    <h2 id="passive-damage-modifier">Passive Damage Modifier</h2>
    <p>The passive damage modifier is based on your passive skills and buffs.</p>
    <pre><code>Modifier = 1 + Sum(All Passive Damage Buffs)
  </code></pre>
    <p>If you have a passive skill that increases your damage by 8%, and a buff that you always keep up that increases your damage by another 15%, your passive damage modifier is:</p>
    <pre><code>Modifier = 1 + (0.08 + 0.15)
Modifier = 1 + 0.23
Modifier = 1.23
</code></pre>
    <h2 id="sheet-damage-calculation">Sheet Damage Calculation</h2>
    <p>Now that you have your average damage and the four modifiers, calculating your sheet damage is as easy as multiplying them all together.</p>
    <p>Using the numbers calculated above:</p>
    <pre><code>Sheet Damage = 1589.5 * 75.9 * 2.75545 * 2.43414634... * 1.23
Sheet Damage = 995283.121015...
Sheet Damage = 995283
</code></pre>
  </script>

  <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.1.2/handlebars.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/ember.js/1.5.0/ember.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/ember-data.js/1.0.0-beta.7/ember-data.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <script src="js/app.js"></script>
  <script src="js/router.js"></script>
  <script src="js/models/character.js"></script>
  <script src="js/controllers/stats_controller.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-50117683-2', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
